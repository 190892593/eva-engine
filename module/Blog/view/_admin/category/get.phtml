<?
$category = $this->category;
$title = $category['id'] ? 'Edit Category' : 'Create Category';
$method = $category['id'] ? 'put' : 'post';
$this->headTitle($title, 'SET');
$this->textDelay('breadcrumbText', $title);

if($this->form){
	$form = $this->form;
} else {
    $form = Eva\Api::_()->getForm('\Blog\Form\CategoryForm');
}
$form->init(array(
    'action' => $this->uri('/admin/blog/category/'),
    'method' => $method,
    'values' => $this->category
));
?>
<div class="row">
<form <?=$this->formAttr($form)?>>
    <?=$form->restful();?>
    <?=$form->helper('id');?>
    <div class="span10">
        <div class="slate">
            <div class="page-header">
                <?if($category):?>
                <div class="btn-group pull-right">
                    <a href="<?=$this->uri('/admin/blog/category/create')?>" class="btn">Create New</a>
                </div>
                <?endif?>
                <h2><?=$title?></h2>
            </div>
            <fieldset class="">
                <div class="control-group <?=$form->isError('categoryName') ? 'error' : '';?>">
                    <?=$form->helper('categoryName', 'label', array('class' => 'control-label'))?>
                    <div class="controls">
                        <?=$form->helper('categoryName', array('class' => ''))?>
                        <div class="help-block"><?=$form->helper('categoryName', 'formElementErrors')?></div>
                    </div>
                </div>
                <div class="control-group <?=$form->isError('urlName') ? 'error' : '';?>">
                    <?=$form->helper('urlName', 'label', array('class' => 'control-label'))?>
                    <div class="controls">
                        <?=$form->helper('urlName', array('class' => ''))?>
                        <div class="help-block"><?=$form->helper('urlName', 'formElementErrors')?></div>
                    </div>
                </div>

                <div class="control-group <?=$form->isError('orderNumber') ? 'error' : '';?>">
                    <?=$form->helper('orderNumber', 'label', array('class' => 'control-label'))?>
                    <div class="controls">
                        <?=$form->helper('orderNumber', array('class' => ''))?>
                        <div class="help-block"><?=$form->helper('orderNumber', 'formElementErrors')?></div>
                    </div>
                </div>
                <div class="control-group <?=$form->isError('createTime') ? 'error' : '';?>">
                    <?=$form->helper('createTime', 'label', array('class' => 'control-label'))?>
                    <div class="controls">
                        <?=$form->helper('createTime', array('class' => ''))?>
                       <div class="help-block"><?=$form->helper('createTime', 'formElementErrors')?></div>
                    </div>
                </div>
                <div class="control-group <?=$form->isError('count') ? 'error' : '';?>">
                    <?=$form->helper('count', 'label', array('class' => 'control-label'))?>
                    <div class="controls">
                        <?=$form->helper('count', array('class' => ''))?>
                        <div class="help-block"><?=$form->helper('count', 'formElementErrors')?></div>
                    </div>
                </div>
                
                <div class="control-group <?=$form->isError('description') ? 'error' : '';?>">
                    <?=$form->helper('description', 'label', array('class' => 'control-label'))?>
                    <div class="controls">
                        <?=$form->helper('description', 'formTextarea')?>
                        <div class="help-block"><?=$form->helper('description', 'formElementErrors')?></div>
                    </div>
                </div>
            </fieldset>
        </div>
    </div><!--span10 end-->

    <div class="span10 listing-buttons">
        <button class="btn btn-info btn-large">Save Category</button>
    </div>
</form>
</div>
