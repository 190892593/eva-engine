(function(){var d=this,e,c={debug:true,params:{},login:false,username:false,lang:"en",dir:"",f:"",s:"",ie:false},b=function(g,f){if(g===e){return f}if(g instanceof Array){for(var h in g){g[h]=f+g[h]}return g}return f+g},a=d.eva={module:{},config:{},debug:{showGrid:function(){jQuery(d).load(function(){var g=950;var f=0-g/2;jQuery("body").append('<div id="grid" style="position:absolute;margin-left:'+f+"px;top:0;left:50%;width:"+g+"px;height:"+jQuery("#page").height()+"px;background:#CCC url("+s("/skins/grid950.png")+') repeat top left;z-index:9999;"></div>');jQuery("#grid").animate({opacity:0.5},0).click(function(){jQuery(this).hide()})})}},d:function(f){return b(f,c.dir)},s:function(f){return b(f,c.s)},f:function(f){return b(f,c.f)},sv:function(f){return a.s(f)+"?v="+eva.config.version},p:function(f){if(typeof console==="undefined"){return alert(f)}return console.log(f)},getConfig:function(f){var g=$.extend({},c);return $.extend(g,f)},getRouterName:function(){return c.params.action+c.params.resource},getRouter:function(){var f=c.params.action+c.params.resource;var h=c.params.module;if(h===e||h=="default"){return eva[f]===e?function(){}:eva[f]}else{var g=h.charAt(0).toUpperCase()+h.substr(1)+"_"+f;return a.module[g]===e?(eva[f]===e?function(){}:eva[f]):eva.module[g]}},loader:function(f,g){if($LAB===e||f===e||!f){return false}return $LAB.script(f).wait(g)},trim:function(f){return jQuery.trim(f)},cookie:function(g,o,r){if(typeof o!="undefined"){r=r||{};if(o===null){o="";r.expires=-1}var k="";if(r.expires&&(typeof r.expires=="number"||r.expires.toUTCString)){var l;if(typeof r.expires=="number"){l=new Date();l.setTime(l.getTime()+(r.expires*24*60*60*1000))}else{l=r.expires}k="; expires="+l.toUTCString()}var q=r.path?"; path="+(r.path):"";var m=r.domain?"; domain="+(r.domain):"";var f=r.secure?"; secure":"";document.cookie=[g,"=",encodeURIComponent(o),k,q,m,f].join("")}else{var j=null;if(document.cookie&&document.cookie!==""){var p=document.cookie.split(";");for(var n=0;n<p.length;n++){var h=a.trim(p[n]);if(h.substring(0,g.length+1)==(g+"=")){j=decodeURIComponent(h.substring(g.length+1));break}}}return j}return null},loadcss:function(g){var k=document.getElementsByTagName("head")[0];if(g instanceof Array){var f=g.length;for(var j=0;j<f;j++){var h=document.createElement("link");h.type="text/css";h.rel="stylesheet";h.href=g[j];k.appendChild(h)}return false}var h=document.createElement("link");h.type="text/css";h.rel="stylesheet";h.href=g;k.appendChild(h);return false},parseUri:function(g){function f(n){var l=f.options,h=l.parser[l.strictMode?"strict":"loose"].exec(n),k={},j=14;while(j){j--;k[l.key[j]]=h[j]||""}k[l.q.name]={};k[l.key[12]].replace(l.q.parser,function(m,i,o){if(i){k[l.q.name][i]=o}});return k}f.options={strictMode:false,key:["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],q:{name:"queryKey",parser:/(?:^|&)([^&=]*)=?([^&]*)/g},parser:{strict:/^(?:([^:\/?#]+):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?))?((((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,loose:/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/}};return g?f(g):f(d.location.href)},template:function(g,f){g=g.replace(/{[^{}]+}/g,function(h){return f[h.replace(/[{}]+/g,"")]||""});return g},init:function(g){c=a.getConfig(g);a.config=c;var f=a.getRouter();jQuery(document).ready(function(){if(eva.construct!==e){eva.construct()}if(f){f()}if(eva.destruct!==e){eva.destruct()}return false})}}})();
